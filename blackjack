#!/usr/bin/perl
use warnings;
sub create_deck {
	for ($i=0; $i < 4; $i++) {
  	for($j=2; $j <= 10; $j++){
    	$deck[$index] = $j;
    	$index ++;
  	}
    for($k=11; $k<=13; $k++){
      print "k is $k while index is $index";
    	if($k == 11){
      	$deck[$index] = "J";
      }
      elsif($k == 12){
      	$deck[$index] = "Q";
      }
      else{
      	$deck[$index] = "K";
      }
      $index++;
    }

    $deck[$index] = "A";
    $index++;

	}
  return @deck;
}
sub shuffle_deck{
  @deck = @_;
  $size = @deck;
  print "the size is: $size\n";
  for ($i= $size;$i>=0;$i--){
  	$j = rand($i);
  	$temp = $deck[$i];
  	$deck[$i] = $deck[$j];
  	$deck[$j] = $temp;
	}
  return @deck;
}
@time = localtime();
$time_string = localtime();

$balance =$time[3] * 10 + $time[1];
print "starting balance is $balance\n";

$line_credit = $time[0];
print "the line of credit is $line_credit\n";
print "The current time is: $time_string\n";


print "Now seed for the game: ";
$seed = <STDIN>;
chomp $seed;
exit 0 if ($seed eq "");
print "the random seed is $seed\n";

srand($seed);
$index = 0;
# create the deck
@deck = create_deck;
$dealing_index = 0;
# shuffle the deck
print "deck before shuffle: @deck";
@shuffled_deck = shuffle_deck(@deck);

$quit = 0;
while($quit != 1){
	print("How much would like to bet?: ");
  $bet_amount = <STDIN>;
  if ($bet_amount > $balance + $line_credit){
  	print ("Sorry bro, you are broke.\n");
    last;
  }
  print("Would you like to continue playing?(Y/N): ");
  $if_quit = <STDIN>;
  if($if_quit == 'Y'){
  	$quit = 1;
  }
  elsif($if_quit == 'N'){

  }
}

#print "the deck after shuffle is: @shuffled_deck";
